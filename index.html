<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>UnstableNet Chat</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
  <h1>UnstableNet Chat</h1>
  <button id="connectWallet">Connect Wallet</button>
  <div id="status"></div>

  <hr>

  <h2>Contract Interaction</h2>
  <button id="callContract">Call Contract Method</button>
  <div id="contractResult"></div>

  <script>
    let web3;
    let userAccount;

    // ABI and contract address from your original script
    const contractABI = [ 
      /* your contract ABI array here */
    ];

    const contractAddress = "0xYourContractAddressHere";
    let contract;

    // Connect wallet
    document.getElementById("connectWallet").addEventListener("click", async () => {
      if (typeof window.ethereum !== "undefined") {
        try {
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          userAccount = accounts[0];
          document.getElementById("status").innerText = `Connected: ${userAccount}`;

          // Init web3
          web3 = new Web3(window.ethereum);

          // Init contract
          contract = new web3.eth.Contract(contractABI, contractAddress);
        } catch (err) {
          console.error("User denied account access", err);
        }
      } else {
        alert("MetaMask not detected. Please install MetaMask.");
      }
    });

    // Example contract method call
    document.getElementById("callContract").addEventListener("click", async () => {
      if (!contract) {
        alert("Please connect your wallet first.");
        return;
      }
      try {
        const result = await contract.methods.myMethodName().call(); // Replace myMethodName with your method
        document.getElementById("contractResult").innerText = `Result: ${result}`;
      } catch (err) {
        console.error(err);
        document.getElementById("contractResult").innerText = "Error calling contract.";
      }
    });
  </script>
</body>
</html>
